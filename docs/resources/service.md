---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "koyeb_service Resource - terraform-provider-koyeb"
subcategory: ""
description: |-
  Service resource in the Koyeb Terraform provider.
---

# koyeb_service (Resource)

Service resource in the Koyeb Terraform provider.

## Example Usage

```terraform
resource "koyeb_service" "my-service" {
  app_name = koyeb_app.my_app.name
  definition {
    name = "my-service"
    instance_types {
      type = "micro"
    }
    ports {
      port     = 3000
      protocol = "http"
    }
    scalings {
      min = 1
      max = 1
    }
    env {
      key   = "FOO"
      value = "BAR"
    }
    env {
      key   = "PORT"
      value = "3000"
    }
    routes {
      path = "/"
      port = 3000
    }
    regions = ["fra"]
    docker {
      image = "koyeb/demo"
    }
  }

  depends_on = [
    koyeb_app.my-app
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `app_name` (String) The app name the service is assigned to
- `definition` (Block List, Min: 1, Max: 1) The service deployment definition (see [below for nested schema](#nestedblock--definition))

### Optional

- `messages` (String) The status messages of the service

### Read-Only

- `active_deployment` (String) The service active deployment ID
- `app_id` (String) The app id the service is assigned to
- `created_at` (String) The date and time of when the service was created
- `id` (String) The service ID
- `latest_deployment` (String) The service latest deployment ID
- `name` (String) The service name
- `organization_id` (String) The organization ID owning the service
- `paused_at` (String) The date and time of when the service was last updated
- `resumed_at` (String) The date and time of when the service was last updated
- `status` (String) The status of the service
- `terminated_at` (String) The date and time of when the service was last updated
- `updated_at` (String) The date and time of when the service was last updated
- `version` (String) The version of the service

<a id="nestedblock--definition"></a>
### Nested Schema for `definition`

Required:

- `instance_types` (Block Set, Min: 1) (see [below for nested schema](#nestedblock--definition--instance_types))
- `name` (String) The service name
- `ports` (Block Set, Min: 1) (see [below for nested schema](#nestedblock--definition--ports))
- `regions` (Set of String) The service deployment regions to deploy to
- `scalings` (Block Set, Min: 1) (see [below for nested schema](#nestedblock--definition--scalings))

Optional:

- `docker` (Block Set, Max: 1) (see [below for nested schema](#nestedblock--definition--docker))
- `env` (Block Set) (see [below for nested schema](#nestedblock--definition--env))
- `git` (Block Set, Max: 1) (see [below for nested schema](#nestedblock--definition--git))
- `health_checks` (Block Set) (see [below for nested schema](#nestedblock--definition--health_checks))
- `routes` (Block Set) (see [below for nested schema](#nestedblock--definition--routes))
- `skip_cache` (Boolean) If set to true, the service will be deployed without using the cache
- `type` (String) The service type, either WEB or WORKER (default WEB)
- `volumes` (Block Set) The volumes to attach and mount to the service (see [below for nested schema](#nestedblock--definition--volumes))

<a id="nestedblock--definition--instance_types"></a>
### Nested Schema for `definition.instance_types`

Required:

- `type` (String) The instance type to use to support your service

Optional:

- `scope` (List of String) The regions to use the instance type


<a id="nestedblock--definition--ports"></a>
### Nested Schema for `definition.ports`

Required:

- `port` (Number) The internal port on which this service's run command will listen
- `protocol` (String) The protocol used by your service


<a id="nestedblock--definition--scalings"></a>
### Nested Schema for `definition.scalings`

Optional:

- `max` (Number) The maximum number of instance to use to support your service
- `min` (Number) The minimal number of instances to use to support your service
- `scope` (List of String) The regions to apply the scaling configuration
- `targets` (Block Set) (see [below for nested schema](#nestedblock--definition--scalings--targets))

<a id="nestedblock--definition--scalings--targets"></a>
### Nested Schema for `definition.scalings.targets`

Optional:

- `average_cpu` (Block Set) The CPU usage (expressed as a percentage) across all Instances of your Service within a region (see [below for nested schema](#nestedblock--definition--scalings--targets--average_cpu))
- `average_mem` (Block Set) The memory usage (expressed as a percentage) across all Instances of your Service within a region (see [below for nested schema](#nestedblock--definition--scalings--targets--average_mem))
- `requests_per_second` (Block Set) The number of concurrent requests per second across all Instances of your Service within a region (see [below for nested schema](#nestedblock--definition--scalings--targets--requests_per_second))

<a id="nestedblock--definition--scalings--targets--average_cpu"></a>
### Nested Schema for `definition.scalings.targets.average_cpu`

Required:

- `value` (Number) The target value of the autoscaling target


<a id="nestedblock--definition--scalings--targets--average_mem"></a>
### Nested Schema for `definition.scalings.targets.average_mem`

Required:

- `value` (Number) The target value of the autoscaling target


<a id="nestedblock--definition--scalings--targets--requests_per_second"></a>
### Nested Schema for `definition.scalings.targets.requests_per_second`

Required:

- `value` (Number) The target value of the autoscaling target




<a id="nestedblock--definition--docker"></a>
### Nested Schema for `definition.docker`

Required:

- `image` (String) The Docker image to use to support your service

Optional:

- `args` (List of String) The Docker args to use
- `command` (String) The Docker command to use
- `entrypoint` (List of String) The Docker entrypoint to use
- `image_registry_secret` (String) The Koyeb secret containing the container registry credentials
- `privileged` (Boolean) When enabled, the service container will run in privileged mode. This advanced feature is useful to get advanced system privileges.


<a id="nestedblock--definition--env"></a>
### Nested Schema for `definition.env`

Required:

- `key` (String) The name of the environment variable

Optional:

- `scope` (List of String) The regions the environment variable needs to be exposed
- `secret` (String, Sensitive) The secret name to use as the value of the environment variable
- `value` (String) The value of the environment variable


<a id="nestedblock--definition--git"></a>
### Nested Schema for `definition.git`

Required:

- `branch` (String) The GitHub branch to deploy
- `repository` (String) The GitHub repository to deploy

Optional:

- `buildpack` (Block Set, Max: 1) (see [below for nested schema](#nestedblock--definition--git--buildpack))
- `dockerfile` (Block Set, Max: 1) (see [below for nested schema](#nestedblock--definition--git--dockerfile))
- `no_deploy_on_push` (Boolean) If set to true, no Koyeb deployments will be triggered when changes are pushed to the GitHub repository branch
- `workdir` (String) The directory where your source code is located. If not set, the work directory defaults to the root of the repository.

<a id="nestedblock--definition--git--buildpack"></a>
### Nested Schema for `definition.git.buildpack`

Optional:

- `build_command` (String) The command to build your application during the build phase. If your application does not require a build command, leave this field empty
- `privileged` (Boolean) When enabled, the service container will run in privileged mode. This advanced feature is useful to get advanced system privileges.
- `run_command` (String) The command to run your application once the built is completed


<a id="nestedblock--definition--git--dockerfile"></a>
### Nested Schema for `definition.git.dockerfile`

Optional:

- `args` (List of String) The arguments to pass to the Docker command
- `command` (String) Override the command to execute on the container
- `dockerfile` (String) The location of your Dockerfile relative to the work directory. If not set, the work directory defaults to the root of the repository.
- `entrypoint` (List of String) Override the default entrypoint to execute on the container
- `privileged` (Boolean) When enabled, the service container will run in privileged mode. This advanced feature is useful to get advanced system privileges.
- `target` (String) Target build stage: If your Dockerfile contains multi-stage builds, you can choose the target stage to build and deploy by entering its name



<a id="nestedblock--definition--health_checks"></a>
### Nested Schema for `definition.health_checks`

Optional:

- `grace_period` (Number) The period in seconds to wait for the instance to become healthy, default is 5s
- `http` (Block Set, Max: 1) (see [below for nested schema](#nestedblock--definition--health_checks--http))
- `interval` (Number) The period in seconds between two health checks, default is 60s
- `restart_limit` (Number) The number of consecutive failures before attempting to restart the service, default is 3
- `tcp` (Block Set, Max: 1) (see [below for nested schema](#nestedblock--definition--health_checks--tcp))
- `timeout` (Number) The maximum time to wait in seconds before considering the check as a failure, default is 5s

<a id="nestedblock--definition--health_checks--http"></a>
### Nested Schema for `definition.health_checks.http`

Required:

- `path` (String) The path to use to perform the HTTP health check
- `port` (Number) The port to use to perform the health check

Optional:

- `headers` (Block Set) (see [below for nested schema](#nestedblock--definition--health_checks--http--headers))
- `method` (String) An optional HTTP method to use to perform the health check, default is GET

<a id="nestedblock--definition--health_checks--http--headers"></a>
### Nested Schema for `definition.health_checks.http.headers`

Required:

- `key` (String) The name of the header

Optional:

- `value` (String) The value of the header



<a id="nestedblock--definition--health_checks--tcp"></a>
### Nested Schema for `definition.health_checks.tcp`

Required:

- `port` (Number) The port to use to perform the health check



<a id="nestedblock--definition--routes"></a>
### Nested Schema for `definition.routes`

Required:

- `path` (String) Path specifies a route by HTTP path prefix. Paths must start with / and must be unique within the app
- `port` (Number) The internal port on which this service's run command will listen


<a id="nestedblock--definition--volumes"></a>
### Nested Schema for `definition.volumes`

Required:

- `id` (String) The volume ID to mount to the service
- `path` (String) The path where to mount the volume

Optional:

- `replica_index` (Number) Explicitly specify the replica index to mount the volume to
- `scope` (List of String) The regions to apply the scaling configuration


